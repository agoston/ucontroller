!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports["detail-plugin"]=n():e["detail-plugin"]=n()}(self,(()=>(()=>{"use strict";var e={3512:(e,n,t)=>{t.r(n),t.d(n,{sendPV:()=>l,sendPluginEvent:()=>f,sendSafeEvent:()=>p,weexGepTracker:()=>v});var r=t(2818),o=t(7355),i=["eventId","eventName","eventType","jsVersion","region"],c=function e(n,t){return void 0===n&&(n=20),t=t||"",n?e(--n,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+t):t},a=function(e,n){var t;switch(e){case"sendPluginEvent":t=(0,o.A)({type:"event",p1:n[0]},n[1]);break;case"sendPV":t={type:"pv"};break;default:t=!1}return t&&s(t),!1},u=function(){window.AES_CONFIG=window.AES_CONFIG||{},window.AES_CONFIG.pv_id||(window.AES_CONFIG.pv_id=c(20,""))},s=function(e){u();var n=window.AES_CONFIG,t=n.pid,r=n.sampling,o=void 0===r?1:r,i=n.times,c=void 0===i?1:i,a=n.page_id,s=void 0===a?encodeURIComponent(window.location.href):a,l=n.sdk_version,f=void 0===l?"2.1.6":l,p=n.title,v=void 0===p?document.title:p,m=n.username,g=n.user_type,y=n.sid,w=n.pv_id,h=n.hash,_=n.dim1,k=n.dim2,b=n.dim3,C=n.dim4,E=n.dim5,x=n.dim6,P=n.dim7,S=n.dim8,I=n.dim9,O=n.dim10;if(!t)return!1;var R=encodeURIComponent(d(e)),j=encodeURIComponent(d({pid:t,sampling:o,times:c,page_id:s,sdk_version:f,title:v,username:m,user_type:g,sid:y,pv_id:w,hash:h,dim1:_,dim2:k,dim3:b,dim4:C,dim5:E,dim6:x,dim7:P,dim8:S,dim9:I,dim10:O,msg:R}));window.userTrack&&window.userTrack.commitut("expose",2201,"UT","","/aes.1.1","","",{gokey:j,gmkey:"EXP"})},d=function(e){var n=[];for(var t in e)e[t]&&n.push(t+"="+e[t]);return n.join("&")};function l(e){a("sendPV",e)}function f(e,n,t,r,o,i,c,u,s){a("sendPluginEvent","string"!=typeof n?[e,n]:[e,{et:n,path:t,c1:r,c2:o,c3:i,c4:c,c5:u,c6:s}])}var p=function(e){var n=e.eventId,t=e.eventName,o=e.eventType,c=void 0===o?"EXP":o,u=e.jsVersion,s=e.region,d=(0,r.A)(e,i);a("sendPluginEvent",[n,{et:c,c1:"safe_fe",c2:u,c3:s,c4:t,c6:function(){try{return JSON.stringify(d)}catch(e){return null}}()}])},v={sendPV:l,sendPluginEvent:f,sendSafeEvent:p}},7355:(e,n,t)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r.apply(null,arguments)}t.d(n,{A:()=>r})},2818:(e,n,t)=>{function r(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.indexOf(r)>=0)continue;t[r]=e[r]}return t}t.d(n,{A:()=>r})}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={exports:{}};return e[r](i,i.exports,t),i.exports}t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{if(void 0!==t){var e=t.u,n=t.e,r={},o={};t.u=function(n){return e(n)+(r.hasOwnProperty(n)?"?"+r[n]:"")},t.e=function(i){return n(i).catch((function(n){var c=o.hasOwnProperty(i)?o[i]:5;if(c<1){var a=e(i);throw n.message="Loading chunk "+i+" failed after 5 retries.\n("+a+")",n.request=a,n}return new Promise((function(e){setTimeout((function(){var n=Date.now();r[i]=n,o[i]=c-1,e(t.e(i))}),0)}))}))}}})();var r={};return(()=>{t.r(r);var e={};t.r(e),t.d(e,{click:()=>C,clk:()=>G,exp:()=>L,exposure:()=>E,sendAEClick:()=>x,sendAEExposure:()=>P,sendApiError:()=>T,sendApiSuccess:()=>N,sendCustomError:()=>A,sendInteractionObject:()=>k,sendInteractionObjects:()=>b,sendPV:()=>_,sendPagePerfCfpt:()=>O,sendPagePerfDataComplete:()=>j,sendPagePerfDidMount:()=>R,sendPagePref:()=>I,sendPluginEvent:()=>S,sendResourceError:()=>V,sendSafeEvent:()=>q,sendWhitePageEvent:()=>$,setConfig:()=>h,weexGepTracker:()=>D});var n={};t.r(n),t.d(n,{get:()=>ce,getCity:()=>pe,getCsrfToken:()=>ke,getCurrency:()=>me,getGdpr:()=>be,getLocale:()=>ye,getMemberId:()=>_e,getProvince:()=>le,getRegion:()=>se,getSite:()=>ae,isLoggedIn:()=>he,set:()=>ie,setCity:()=>ve,setCurrency:()=>ge,setGdpr:()=>Ce,setLocale:()=>we,setProvince:()=>fe,setRegion:()=>de,setSite:()=>ue});var o="undefined"==typeof window,i={},c=o?function(e){return function(e){var n;return null===(n=i.principal.query)||void 0===n?void 0:n[e]}(e)}:function(e){var n,t=window.location.href;try{t=decodeURI(t)}catch(e){}var r=new RegExp("("+e+"=)(.*?)([;&?#]|$)");return(null===(n=t.match(r))||void 0===n?void 0:n[2])||""};function a(e){e=function(e){var n,t,r=null===(n=window.goldlog.spm_ab)||void 0===n?void 0:n.join("."),o=e.params=e.params||{},i=o["spm-cnt-cd"];o.st_page_id||(o.st_page_id=window.dmtrack_pageid||""),delete o["spm-cnt-cd"],i&&!o["spm-cnt"]&&(o["spm-cnt"]="".concat(r,".").concat(i)),o["spm-url"]||(o["spm-url"]=c("spm-url")||"");var a=(null===(t=window.goldlog.spm_ab)||void 0===t?void 0:t[1])||"";if("click"!==e.type||o.ae_page_type||(o.ae_page_type=a),"exposure"!==e.type||o.exp_page||(o.exp_page=a),o.ali_apache_track=encodeURIComponent(s("ali_apache_track"))||"",!o.ali_apache_track){var u=s("xman_us_t");if(u){var d=u.match(/x_lid=([^&]+)/);d&&(o.ali_apache_track=encodeURIComponent("mid=".concat(d[1]))||"")}}return e}(e);var n=Object.keys(e.params).map((function(n){return n+"="+e.params[n]})).join("&");window.goldlog&&window.goldlog.record(e.path,e.event,n,"POST")}function u(e){try{window.goldlog?e():(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.aplus_pubsub.subscribe",arguments:["goldlogReady",function(){e()}]})}catch(e){}}function s(e){var n=document.cookie,t=new RegExp("(?:(?:^|.*;\\s*)".concat(e,"\\s*\\=\\s*([^;]*).*$)|^.*$")),r=n.replace(t,"$1");return decodeURIComponent(r)}var d="undefined"!=typeof window,l={};d&&(window._comet_module_=window._comet_module_||{},l=window._comet_module_);var f={get:function(e){return"function"==typeof l[e]?l[e]():l[e]},load:function(e){return"undefined"==typeof window?f.get(e):(window._CosmosReadyPromise_=window._CosmosReadyPromise_||new Promise((function(e){window._CosmosReadyResolve_=e})),window.Comet?f.get(e):window._CosmosReadyPromise_.then((function(){return f.get(e)})))},set:function(e,n){l[e]=n},use:function(e,n){var t={};return Object.defineProperty(t,"current",{get:function(){return function(e,n){for(var t=n.split("."),r=t.length,o=0;null!=e&&o<r;)e=e[t[o++]];return o&&o==r?e:void 0}(l,e)||n}}),t}};const p=f;var v=t(2818),m=["eventId","eventName","eventType","jsVersion","region"];try{var g,y=(null===(g=document.querySelector('meta[name="aplus-exinfo"]'))||void 0===g?void 0:g.getAttribute("content"))||"";(null==y?void 0:y.split("&")).forEach((function(e){var n=e.split("=");"pid"===n[0]&&(window.goldlog_queue||(window.goldlog_queue=[])).push({action:"goldlog.setMetaInfo",arguments:["aplus-cpvdata",{pid:n[1]}]})}))}catch(e){}var w=function(e,n){window.gep_queue||(window.gep_queue=[]),window.gep_queue.push({action:e,arguments:n})};function h(e){window.AES&&window.AES.setConfig?window.AES.setConfig(e):w("setConfig",[e])}function _(e,n){void 0===e&&(e={}),void 0===n&&(n={}),w("sendPV",[Object.assign({},e),n])}function k(e){w("sendInteractionObject",[e])}function b(e,n){w("sendInteractionObject",[e,n])}function C(e){var n;k(((n={interaction_type:"EXP",object_type:e.ae_object_type,object_value:e.ae_object_value,biz_type:e.ae_button_type})["spm-cnt"]=e["spm-cnt"],n))}function E(e){var n;k(((n={interaction_type:"EXP",object_type:e.object_type,object_value:e.object_type,biz_type:e.exp_type})["spm-cnt"]=e["spm-cnt"],n))}function x(e){w("sendAEClick",[e])}function P(e){w("sendAEExposure",[e])}function S(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];w("sendPluginEvent",n)}var I=function(e){var n,t,r,o;(null===(n=window)||void 0===n||null===(t=n.performance)||void 0===t?void 0:t.mark)&&performance.mark("mark-"+e),(null===(r=window)||void 0===r||null===(o=r.performance)||void 0===o?void 0:o.measure)&&performance.measure(e,"fetchStart","mark-"+e)},O=function(){I("cfpt")},R=function(){I("didMount")},j=function(){I("dataComplete")},A=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];w("sendCustomError",n)},T=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];w("sendApiError",n)},N=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];w("sendApiSuccess",n)},V=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];w("sendResourceError",n)},$=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];w("sendWhitePageEvent",n)},q=function(e){var n=e.eventId,t=e.eventName,r=e.eventType,o=void 0===r?"EXP":r,i=e.jsVersion,c=e.region,a=(0,v.A)(e,m);w("sendPluginEvent",[n,{et:o,c1:"safe_fe",c2:i,c3:c,c4:t,c6:function(){try{return JSON.stringify(a)}catch(e){return null}}()}])},D=t(3512).weexGepTracker,G=function(e){var n,t,r,o=null===(n=p.get("util"))||void 0===n||null===(t=n.tracker)||void 0===t?void 0:t.clk;return o?o(e):(r=e,void u((function(){a({type:"click",path:r.goldlog_path||"/ae.pc_click.statweb_ae_click",event:"CLK",params:r})})))},L=function(e){var n,t,r,o=null===(n=p.get("util"))||void 0===n||null===(t=n.tracker)||void 0===t?void 0:t.exp;return o?o(e):(r=e,void u((function(){a({type:"exposure",path:r.goldlog_path||"/ae.pc_ctr.statweb_ae_ctr",event:"EXP",params:r})})))},U={},M=decodeURIComponent,X=encodeURIComponent;function F(e){return"string"==typeof e}function z(e){return F(e)&&""!==e}function Z(e){if(!z(e))throw new TypeError("Cookie name must be a non-empty string")}function B(e){return e}U.get=function(e,n){Z(e),n="function"==typeof n?{converter:n}:n||{};var t=function(e,n){var t={};if(F(e)&&e.length>0)for(var r,o,i,c=n?M:B,a=e.split(/;\s/g),u=0,s=a.length;u<s;u++){if((i=a[u].match(/([^=]+)=/i))instanceof Array)try{r=M(i[1]),o=c(a[u].substring(i[1].length+1))}catch(e){}else r=M(a[u]),o="";r&&(t[r]=o)}return t}(document.cookie,!n.raw);return(n.converter||B)(t[e])},U.set=function(e,n,t){Z(e);var r=(t=t||{}).expires,o=t.domain,i=t.path;t.raw||(n=X(String(n)));var c=e+"="+n,a=r;return"number"==typeof a&&(a=new Date).setDate(a.getDate()+r),a instanceof Date&&(c+="; expires="+a.toUTCString()),z(o)&&(c+="; domain="+o),z(i)&&(c+="; path="+i),t.secure&&(c+="; secure"),t.sameSite&&(c+="; samesite="+t.sameSite),document.cookie=c,c},U.remove=function(e,n){return(n=n||{}).expires=new Date(0),this.set(e,"",n)};const H=U;var J,W="aep_usuc_f",K="xman_us_t",Q="xman_us_f",Y="acs_usuc_t";const ee={domain:(null===(J=location.host.match(/.*\.(.*\..*$)/))||void 0===J?void 0:J[1])||"aliexpress.com",cookie:{site:{name:W,key:"site",rule:/^[a-z]{3}(_[a-z]{1})?$/},region:{name:W,key:"region",rule:/^[A-Z]{2,3}$/},province:{name:W,key:"province",rule:/^[0-9]{18}$/},city:{name:W,key:"city",rule:/^[0-9]{18}$/},currency:{name:W,key:"c_tp",rule:/^[A-Z]{3}$/},locale:{name:W,key:"b_locale",rule:/^[a-z]{2}[_|-][A-Z]{2}$/},sign:{name:K,key:"sign",transform:function(e){return e?"y":"n"}},memberId:{name:Q,key:"x_user",transform:function(e){var n;return null==e||null===(n=e.match(/\|(\d*)?$/))||void 0===n?void 0:n[1]}},csrfToken:{name:Y,key:"x_csrf"}}};const ne=p.use("config.cookie",ee);var te={get:function(e){return H.get(e,{domain:ne.current.domain,path:"/",raw:!0})||""},set:function(e,n,t){H.set(e,n,{domain:ne.current.domain,path:"/",expires:365,raw:!0,sameSite:null==t?void 0:t.sameSite})},validate:function(e,n){return!n||e&&n.test(e)},_getCookie:function(e){if(o)return re(e)||"";var n=e.name,t=e.key,r=e.rule,i=this.get(n);if(!t)return this.validate(i,r)?i:"";var c=new RegExp("(.*&?"+t+"=)(.*?)(&.*|$)");i.match(c);var a=RegExp.$2;return c.test(i)&&this.validate(a,r)?a:""},getCookie:function(e){return e?e.transform?e.transform(this._getCookie(e)):this._getCookie(e):""},setCookie:function(e,n){var t=n.name,r=n.key,o=n.rule,i=n.sameSite;if(n&&(!e||this.validate(e,o)))if(r){var c=this.get(t);c=new RegExp("(.*&?"+r+"=)(.*?)(&.*|$)").test(c)?RegExp.$1+e+RegExp.$3:(c?c+"&":"")+r+"="+e,this.set(t,c,{sameSite:i})}else this.set(t,e,{sameSite:i})},isTrue:function(e){var n;return this.getCookie(e)===(null!==(n=null==e?void 0:e.trueValue)&&void 0!==n?n:"y")}},re=function(e){var n=i.env;switch(e){case ne.current.cookie.site:return n.site;case ne.current.cookie.region:return n.country;case ne.current.cookie.province:return n.province;case ne.current.cookie.city:return n.city;case ne.current.cookie.currency:return n.currency;case ne.current.cookie.locale:return n.locale;case ne.current.cookie.sign:return i.principal.signedIn;case ne.current.cookie.memberId:return i.principal.accountId;default:return}},oe={xman_us_f:"None"};function ie(e,n,t,r,o){var i;return te.setCookie(e,{name:n,key:t,rule:r,sameSite:null!==(i=null==o?void 0:o.sameSite)&&void 0!==i?i:oe[n]})}function ce(e,n){return te.getCookie({name:e,key:n})}function ae(){return te.getCookie(ne.current.cookie.site)}function ue(e){return te.setCookie(e,ne.current.cookie.site)}function se(){return te.getCookie(ne.current.cookie.region)}function de(e){return te.setCookie(e,ne.current.cookie.region)}function le(){return te.getCookie(ne.current.cookie.province)}function fe(e){return te.setCookie(e,ne.current.cookie.province)}function pe(){return te.getCookie(ne.current.cookie.city)}function ve(e){return te.setCookie(e,ne.current.cookie.city)}function me(){return te.getCookie(ne.current.cookie.currency)}function ge(e){return te.setCookie(e,ne.current.cookie.currency)}function ye(){return te.getCookie(ne.current.cookie.locale)}function we(e){return te.setCookie(e,ne.current.cookie.locale)}function he(){return te.isTrue(ne.current.cookie.sign)}function _e(){return te.getCookie(ne.current.cookie.memberId)}function ke(){return te.getCookie(ne.current.cookie.csrfToken)}function be(){return te.getCookie(ne.current.cookie.gdpr)}function Ce(e){return te.setCookie(e,ne.current.cookie.gdpr)}const Ee=n;var xe,Pe=function(){return Pe=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},Pe.apply(this,arguments)},Se=function(e,n,t,r){return new(t||(t=Promise))((function(o,i){function c(e){try{u(r.next(e))}catch(e){i(e)}}function a(e){try{u(r.throw(e))}catch(e){i(e)}}function u(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(c,a)}u((r=r.apply(e,n||[])).next())}))},Ie=function(e,n){var t,r,o,i,c={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(a){return function(u){return function(a){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,a[0]&&(c=0)),c;)try{if(t=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return c.label++,{value:a[1],done:!1};case 5:c.label++,r=a[1],a=[0];continue;case 7:a=c.ops.pop(),c.trys.pop();continue;default:if(!(o=c.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){c=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){c.label=a[1];break}if(6===a[0]&&c.label<o[1]){c.label=o[1],o=a;break}if(o&&c.label<o[2]){c.label=o[2],c.ops.push(a);break}o[2]&&c.ops.pop(),c.trys.pop();continue}a=n.call(e,c)}catch(e){a=[6,e],r=0}finally{t=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}},Oe=e,Re=(null===(xe=window.lib)||void 0===xe?void 0:xe.request)||fetch;function je(e){var n=e.eventId,t=e.eventName,r=e.eventType,o=void 0===r?"EXP":r,i=e.jsVersion,c=e.region,a=e.extra;Oe.sendSafeEvent(Pe({eventId:n,eventName:t,eventType:o,jsVersion:i,region:c},a))}function Ae(e,n){var t,r,o;return Se(this,void 0,Promise,(function(){var i,c,a,u,s,d;return Ie(this,(function(l){switch(l.label){case 0:return i=Ee.getCsrfToken()||"","post"!==(null===(t=e.method)||void 0===t?void 0:t.toLowerCase())&&"form"!==(null===(r=e.method)||void 0===r?void 0:r.toLowerCase())||(e.data?e.data._csrf_token_=i:e.data={_csrf_token_:i},e.headers?e.headers["x-xsrf-token"]=i:e.headers={"x-xsrf-token":i}),e.timeout||(e.timeout=6e4),e.withCredentials=null!==(o=null==n?void 0:n.withCredentials)&&void 0!==o&&o,[4,Re(e)];case 1:if(c=l.sent(),u=(a=c||{}).code,s=a.message,d=a.data,"00"!==u)throw new Error(s||d||"request failed, please check network or request params");return[2,d]}}))}))}var Te=location.href.includes("aliexpress.ru")?"https://portals.aliexpress.ru":"https://portals.aliexpress.com";function Ne(e){var n,t,r="pre"===(null!==(t=null===(n=new URL(location.href).searchParams)||void 0===n?void 0:n.get("__env"))&&void 0!==t?t:"prod")?"https://dev.g.alicdn.com":"https://assets.alicdn.com/g",o="".concat(r,"/ae-affiliate-fe/detail-plugin/").concat(e,"/index.js"),i="".concat(r,"/ae-affiliate-fe/detail-plugin/").concat(e,"/index.css");!function(e){var n=document.getElementsByTagName("HEAD").item(0),t=document.createElement("script");t.type="text/javascript",t.src=e,null==n||n.appendChild(t)}(o),function(e){var n=document.getElementsByTagName("HEAD").item(0),t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.href=e,null==n||n.appendChild(t)}(i)}!function(){Se(this,void 0,void 0,(function(){var e,n;return Ie(this,(function(t){switch(t.label){case 0:if(!Ee.isLoggedIn())return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ae({url:"".concat(Te,"/publisher/shareComponentStatus.do")},{withCredentials:!0})];case 2:return(null==(e=t.sent())?void 0:e.disable)?[2]:[3,4];case 3:return t.sent(),[2];case 4:return t.trys.push([4,6,,7]),[4,Ae({url:"".concat(Te,"/publisher/shareComponentVersion.do")},{withCredentials:!0})];case 5:return(n=t.sent())?(Ne(n),je({eventId:"SITE_STRIPE_LOAD"})):je({eventId:"SITE_STRIPE_LOAD_ERROR_VERSION",extra:{type:"NO_VERSION_OPTIONS"}}),[3,7];case 6:return t.sent(),je({eventId:"SITE_STRIPE_LOAD_ERROR_VERSION",extra:{type:"GET_VERSION_ERROR"}}),[3,7];case 7:return[2]}}))}))}()})(),r})()));