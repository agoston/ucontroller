(window["webpackJsonp-ae-fe/cosmos-1"]=window["webpackJsonp-ae-fe/cosmos-1"]||[]).push([[35],{1233:function(e,n,t){"use strict";t.r(n);var o=t(3),i=t.n(o),r=t(0),a=t.n(r),p=t(1),c=t.n(p),s=t(7),l=t(10),u=t(35),d=function(){var e=a()(c.a.mark((function e(n,t,o){var i,r,a,p,d,y,g,f,v,_,m,b,x;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t&&(t="pc"),!o){e.next=3;break}return e.abrupt("return",new Promise((function(e,n){e({data:{popLayerRuleMap:null==o?void 0:o.popLayerRuleMap}})})));case 3:return d=s.a.get("aep_usuc_f","b_locale"),y=s.a.getRegion(),g=d&&(null==d||null===(i=d.split("_"))||void 0===i?void 0:i[0])+"_"+y,f=s.a.getCurrency(),v=s.a.get("xman_us_f","acs_rt"),_=s.a.get("xman_us_f","x_as_i"),g="en_CN"===g?"en_US":g,m=l.util.awsc,e.next=13,m.init();case 13:return e.next=15,m.getUA();case 15:return b=e.sent,e.next=18,m.getUmidToken();case 18:return x=e.sent,window.fyOBJ=void 0,window.AWSC.configFYEx((function(e){window.fyOBJ=e}),{location:"cn",MaxMTLog:5,MaxKSLog:5,MaxFocusLog:5,MaxNGPLog:5},3e3),e.abrupt("return",u.a.request({type:"POST",api:"mtop.aliexpress.usertouch.poplayer.get",v:"2.0",appKey:"24815441",data:{_currency:f,_lang:g,clientType:t,positionSign:n,ua:b,umidToken:x,ext:JSON.stringify({pullTrafficRuleParam:{originalUrl:null===(r=window)||void 0===r||null===(a=r.location)||void 0===a?void 0:a.href,appAffiParameters:decodeURIComponent(_||"")||"",acsRt:v,referUrl:null===(p=document)||void 0===p?void 0:p.referrer}})}}));case 21:case"end":return e.stop()}}),e)})));return function(n,t,o){return e.apply(this,arguments)}}(),y=t(368),g=t(513),f=t(250),v=t(1191),_=function(){return"postMessage"in window};function m(e,n,t){var o=document.createElement("iframe");return o.src=Object(g.b)(e,{__poplayer_preserve_uuid:n,__prefix:f.b.__prefix||"",__poplayer_position_sign:t}),o.name=n,o.style.width="100%",o.style.height="100%",o.style.border="none",o.style.display="none",o.style.position="fixed",o.style.zIndex="-100",o.style.left="0",o.style.top="0",o.style.transform="translate3d(0, 0, -100)",document.body.appendChild(o),o}function b(){return(b=a()(c.a.mark((function e(n,t){var o,r,p,s,l,u,b,x,w,S,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=Object(g.g)()?"a2g0n":"a2g0o",s=Object(g.g)()?"msite":"pc",Object(y.d)(),l=document.body.getAttribute("data-spm")||"0",Object(g.h)(((o={log_key:"/ae.pc_ctr.statweb_ae_ctr"})["spm-cnt"]=p+"."+l+".poplayer.trigger",o.type="expose",o.positionSign=n.positionSign,o.exp_page=n.positionSign,o.exp_type="poplayer",o.clientType=s,o)),e.next=7,d(n.positionSign,s,t);case 7:if(u=e.sent,b=null==u||null===(r=u.data)||void 0===r?void 0:r.popLayerRuleMap,x=Object.keys(b).reduce((function(e,n){var t;return i()({},e,((t={})[n]=JSON.parse(b[n]),t))}),{}),w=Object(y.b)(x),Object(y.a)({type:"add",payload:w}),S=new g.a(w,x),(h=S.urlWhiteList().fatigue().priority().popType().layer().getPopIds()).length){e.next=16;break}return e.abrupt("return");case 16:h.forEach(function(){var e=a()(c.a.mark((function e(t){var o,i,r,a,u,d,y,b,w,S,h,k,O,j,T,M,U,C,L,R,P,B,I,J,A,N;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b=null===(o=x[t])||void 0===o||null===(i=o.params)||void 0===i?void 0:i.extGcpOutputPageUrl,w=null===(r=x[t])||void 0===r||null===(a=r.params)||void 0===a?void 0:a.jsComboUrl,S=null===(u=x[t])||void 0===u?void 0:u.type,h=null===(d=x[t])||void 0===d||null===(y=d.params)||void 0===y?void 0:y.type,"placeholder"===S&&"emptyContent"===h&&Object(g.h)(((j={log_key:"/ae.pc_ctr.statweb_ae_ctr"})["spm-cnt"]=p+"."+l+".poplayer.openurl",j.type="expose",j.positionSign=n.positionSign,j.houyiTrack=Object(g.i)(null===(k=x[t])||void 0===k||null===(O=k.params)||void 0===O?void 0:O.track),j.exp_page=b,j.exp_type="poplayer",j.clientType=s,j)),!b||!_()){e.next=18;break}if(Object(g.h)(((U={log_key:"/ae.pc_ctr.statweb_ae_ctr"})["spm-cnt"]=p+"."+l+".poplayer.openurl",U.type="expose",U.positionSign=n.positionSign,U.houyiTrack=Object(g.i)(null===(T=x[t])||void 0===T||null===(M=T.params)||void 0===M?void 0:M.track),U.exp_page=b,U.exp_type="poplayer",U.clientType=s,U)),"poplayer-campaign-pc",!w||"poplayer-campaign-pc"===n.positionSign){e.next=11;break}return Object(v.renderModuleAndBindMessage)({positionSign:n.positionSign,popInfo:x[t],track:null===(P=x[t])||void 0===P||null===(B=P.params)||void 0===B?void 0:B.track,parentSpmB:l}),e.abrupt("return");case 11:I=f.c.prod,J=Object(g.b)(I,{parentSpmB:l,jsUrl:encodeURIComponent(Object(g.c)(w))}),A=m(J,t,n.positionSign),(N=A.contentWindow)&&(N.__poplayer_init_data={popInfo:x[t],positionSign:n.positionSign,parentSpmB:l,uuid:t,isSupportWebp:_()}),A.onerror=function(e){console.log(e)},Object(g.d)(t,A,null===(C=x[t])||void 0===C||null===(L=C.params)||void 0===L?void 0:L.track,I,n.positionSign,l,!1,null===(R=x[t])||void 0===R?void 0:R.uuid);case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}());case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n.default=function(e,n){return b.apply(this,arguments)}}}]);